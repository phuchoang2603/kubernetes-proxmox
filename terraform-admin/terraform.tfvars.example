# Example terraform.tfvars file
# Copy this to terraform.tfvars and customize with your values
# Note: terraform.tfvars should be in .gitignore (contains passwords)

vault_addr = "https://vault.example.com"

# User definitions
# Users are automatically assigned Vault policies based on their group membership:
# - admins: Full CRUD access to {env} and shared secrets
# - developers: Read access to {env} and shared secrets  
# - viewers: No Vault secret access (Kubernetes RBAC only)
users = {
  # Admin user with full access to both dev and prod
  "admin" = {
    email    = "admin@example.com"
    password = "CHANGE-ME-SECURE-PASSWORD"
    groups = {
      dev_role  = "admins"   # Gets dev-admin-policy
      prod_role = "admins"   # Gets prod-admin-policy
    }
  }

  # Developer with dev access only
  "developer" = {
    email    = "developer@example.com"
    password = "CHANGE-ME-SECURE-PASSWORD"
    groups = {
      dev_role  = "developers"  # Gets dev-developer-policy
      prod_role = null          # No prod access
    }
  }

  # Viewer with read-only Kubernetes access, no Vault secrets
  "viewer" = {
    email    = "viewer@example.com"
    password = "CHANGE-ME-SECURE-PASSWORD"
    groups = {
      dev_role  = "viewers"  # No Vault policies
      prod_role = "viewers"  # No Vault policies
    }
  }

  # Prod-only admin
  "prod-admin" = {
    email    = "prod.admin@example.com"
    password = "CHANGE-ME-SECURE-PASSWORD"
    groups = {
      dev_role  = null      # No dev access
      prod_role = "admins"  # Gets prod-admin-policy
    }
  }
}

# Available roles: "admins", "developers", "viewers"
# Set to null for no access to that environment

# Policies are automatically assigned by group:
# - {env}-kubernetes-admins → {env}-admin-policy (full CRUD on kv/{env}/*, kv/shared/*)
# - {env}-kubernetes-developers → {env}-developer-policy (read on kv/{env}/data/*, kv/shared/data/*)
# - {env}-kubernetes-viewers → no Vault policies
